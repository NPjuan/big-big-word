# 测试指南 - V4 Claymorphism 设计

## 🧪 快速测试

### 1. 重新加载扩展

1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 找到 "Big Big Word" 扩展
4. 点击刷新图标 🔄

### 2. 测试基本功能

#### 方法一：双击单词

1. 打开 [test.html](./test.html) 或任意英文网页
2. 双击任意单词（如 "hello"）
3. 应该看到翻译弹窗

#### 方法二：选中单词

1. 用鼠标选中一个单词
2. 等待 300ms
3. 应该看到翻译弹窗

### 3. 测试音标播放 🔊

1. 等待单词加载完成
2. 查看音标区域（应该显示音标，如 `/həˈloʊ/`）
3. 点击绿色播放按钮 🔊
4. 应该听到单词发音
5. 播放时按钮应该有脉冲动画

**预期行为：**

- ✅ 按钮可点击
- ✅ 播放时有动画
- ✅ 播放结束动画停止
- ✅ 播放失败有错误提示

### 4. 测试交互效果

#### Hover效果

- **关闭按钮**：hover时放大 + 旋转90度
- **播放按钮**：hover时放大 + 波纹效果
- **释义卡片**：hover时上移 + 左侧绿条显示
- **底部按钮**：hover时上移 + 阴影增强

#### 点击效果

- **关闭按钮**：关闭弹窗
- **播放按钮**：播放音频
- **添加按钮**：添加到单词本
- **打开学习**：跳转到 https://big-big-word-pevn.vercel.app/

### 5. 测试响应式

#### 桌面端（>480px）

- 弹窗宽度：380-460px
- 按钮横向排列

#### 移动端（≤480px）

- 弹窗宽度：92vw
- 按钮纵向排列
- 字号略小

---

## 🎨 视觉检查清单

### 颜色

- [ ] 头部背景：绿色渐变（#10b981 → #059669）
- [ ] 顶部装饰条：橙色渐变
- [ ] 播放按钮：绿色渐变
- [ ] 词性标签：橙色
- [ ] 列表圆点：绿色渐变

### 圆角

- [ ] 弹窗：24px
- [ ] 头部：20px（顶部）
- [ ] 音标区域：18px
- [ ] 释义卡片：18px
- [ ] 按钮：14px
- [ ] 词性标签：12px

### 阴影

- [ ] 弹窗：三层外阴影 + 内高光
- [ ] 按钮：外阴影 + 内高光 + 内阴影
- [ ] 卡片：Claymorphism效果

### 字体

- [ ] 主字体：Fredoka
- [ ] 音标：SF Mono / Monaco
- [ ] 字重：400-700（不再使用800）

---

## 🔧 功能检查清单

### 音标播放

- [ ] 播放按钮可见
- [ ] 点击后播放音频
- [ ] 播放时有动画
- [ ] 播放结束动画停止
- [ ] 网络错误有提示
- [ ] 音频加载失败有提示

### 单词添加

- [ ] 点击"添加到单词本"
- [ ] 显示成功提示
- [ ] 单词保存到 Chrome Storage
- [ ] 重复添加有提示

### 页面跳转

- [ ] 点击"打开学习"
- [ ] 新标签页打开
- [ ] 跳转到正确URL

### 弹窗关闭

- [ ] 点击关闭按钮
- [ ] 点击弹窗外部
- [ ] 选中其他文字
- [ ] 弹窗消失

---

## 🐛 常见问题排查

### 问题1：音标播放无反应

**可能原因：**

1. 音频URL无效
2. 网络连接问题
3. 浏览器阻止自动播放

**排查步骤：**

```javascript
// 1. 打开开发者工具（F12）
// 2. 切换到 Console 标签
// 3. 查看是否有错误信息

// 4. 手动测试音频URL
const audio = new Audio('https://api.dictionaryapi.dev/media/pronunciations/en/hello-uk.mp3')
audio.play()
```

**解决方案：**

- 检查网络连接
- 尝试其他单词
- 查看控制台错误信息

### 问题2：弹窗样式错乱

**可能原因：**

1. CSS文件未加载
2. 浏览器缓存
3. 其他扩展冲突

**排查步骤：**

```bash
# 1. 检查CSS文件是否存在
ls -la extension/content.css

# 2. 检查文件大小
du -h extension/content.css
# 应该显示约 13-14 KB

# 3. 清除浏览器缓存
# Chrome设置 > 隐私和安全 > 清除浏览数据
```

**解决方案：**

- 重新加载扩展
- 清除浏览器缓存
- 禁用其他扩展测试

### 问题3：弹窗不显示

**可能原因：**

1. Content script未注入
2. 选词逻辑问题
3. Z-index被覆盖

**排查步骤：**

```javascript
// 1. 检查content script是否加载
console.log('Big Big Word extension loaded')
// 应该在控制台看到这条消息

// 2. 检查弹窗元素
document.querySelector('#big-big-word-popup')
// 应该返回弹窗元素

// 3. 检查z-index
const popup = document.querySelector('#big-big-word-popup')
console.log(window.getComputedStyle(popup).zIndex)
// 应该显示 2147483647
```

**解决方案：**

- 重新加载扩展
- 检查manifest.json配置
- 查看控制台错误

### 问题4：字体未加载

**可能原因：**

1. Google Fonts被墙
2. 网络问题
3. CSP策略限制

**排查步骤：**

```javascript
// 检查字体是否加载
document.fonts.check('16px Fredoka')
// 返回 true 表示已加载

// 查看所有已加载字体
document.fonts.forEach((font) => {
  console.log(font.family)
})
```

**解决方案：**

- 使用VPN
- 等待字体加载
- 降级到系统字体

---

## 📊 性能测试

### 1. 动画性能

打开 Chrome DevTools > Performance：

1. 点击录制按钮
2. 触发弹窗显示
3. 停止录制
4. 查看 FPS（应该 ≥ 60fps）

### 2. 内存使用

打开 Chrome DevTools > Memory：

1. 拍摄堆快照
2. 多次打开/关闭弹窗
3. 再次拍摄堆快照
4. 对比内存增长（应该 < 1MB）

### 3. 网络请求

打开 Chrome DevTools > Network：

1. 触发单词查询
2. 查看请求数量
3. 查看请求时间
4. 查看音频加载

**预期结果：**

- API请求：1-2个
- 音频请求：1个
- 总时间：< 1秒

---

## ♿ 无障碍测试

### 键盘导航

1. 按 `Tab` 键导航
2. 应该依次聚焦：
   - 关闭按钮
   - 播放按钮
   - 添加按钮
   - 打开学习按钮

3. 按 `Enter` 或 `Space` 激活按钮

### 焦点状态

- [ ] 焦点元素有绿色轮廓
- [ ] 轮廓偏移 2px
- [ ] 轮廓清晰可见

### 对比度

使用 Chrome DevTools > Lighthouse：

1. 运行无障碍审计
2. 检查对比度分数
3. 应该 ≥ 4.5:1

### 屏幕阅读器

使用 macOS VoiceOver：

1. 按 `Cmd + F5` 启动
2. 触发弹窗
3. 听取内容朗读
4. 检查是否清晰

---

## 📱 浏览器兼容性测试

### Chrome

- [ ] 版本 90+
- [ ] 弹窗显示正常
- [ ] 音频播放正常
- [ ] 动画流畅

### Edge

- [ ] 版本 90+
- [ ] 弹窗显示正常
- [ ] 音频播放正常
- [ ] 动画流畅

### Safari（如果支持）

- [ ] 版本 14+
- [ ] 弹窗显示正常
- [ ] 音频播放正常
- [ ] 动画流畅

### Firefox（如果支持）

- [ ] 版本 88+
- [ ] 弹窗显示正常
- [ ] 音频播放正常
- [ ] 动画流畅

---

## 📝 测试报告模板

```markdown
## 测试报告

**测试日期**：2026-01-18  
**测试人员**：[你的名字]  
**浏览器**：Chrome 120  
**操作系统**：macOS 14

### 功能测试

| 功能     | 状态 | 备注 |
| -------- | ---- | ---- |
| 双击选词 | ✅   | 正常 |
| 选中单词 | ✅   | 正常 |
| 音标播放 | ✅   | 正常 |
| 单词添加 | ✅   | 正常 |
| 页面跳转 | ✅   | 正常 |
| 弹窗关闭 | ✅   | 正常 |

### 视觉测试

| 项目     | 状态 | 备注         |
| -------- | ---- | ------------ |
| 颜色主题 | ✅   | 绿色系       |
| 圆角大小 | ✅   | 24px         |
| 阴影效果 | ✅   | Claymorphism |
| 字体加载 | ✅   | Fredoka      |
| 响应式   | ✅   | 正常         |

### 性能测试

| 指标     | 结果  | 标准  |
| -------- | ----- | ----- |
| FPS      | 60    | ≥ 60  |
| 内存增长 | 0.5MB | < 1MB |
| 加载时间 | 0.8s  | < 1s  |

### 问题列表

1. [问题描述]
2. [问题描述]

### 总结

[整体评价]
```

---

## 🎯 测试通过标准

### 必须通过（P0）

- ✅ 音标播放功能正常
- ✅ 弹窗显示正常
- ✅ 颜色主题正确
- ✅ 无JavaScript错误

### 应该通过（P1）

- ✅ 动画流畅（≥ 60fps）
- ✅ 响应式正常
- ✅ 无障碍支持
- ✅ 错误处理完善

### 可以优化（P2）

- ⚠️ 字体加载速度
- ⚠️ 音频加载速度
- ⚠️ 内存使用优化

---

## 📞 反馈渠道

如果发现问题，请：

1. **截图**：保存问题截图
2. **控制台**：复制错误信息
3. **环境**：记录浏览器版本和操作系统
4. **重现**：描述重现步骤

---

**测试版本**：V4 - Claymorphism  
**更新日期**：2026-01-18  
**状态**：✅ 准备测试
